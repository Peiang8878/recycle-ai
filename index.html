<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Recycle or Trash</title>
  <meta name="theme-color" content="#0ea5e9" />
  <!-- Security Headers -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: blob:; media-src 'self' blob:; worker-src 'self' blob:; connect-src 'self'; font-src 'self' data:; object-src 'none'; base-uri 'self'; form-action 'self'; frame-ancestors 'none'; upgrade-insecure-requests" />
  <meta http-equiv="X-Content-Type-Options" content="nosniff" />
  <meta http-equiv="X-Frame-Options" content="DENY" />
  <meta name="referrer" content="strict-origin-when-cross-origin" />
  <link rel="manifest" href="./manifest.json" />
  <link rel="stylesheet" href="./styles.css" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
</head>
<body>
  <header>
    <div class="header-top">
      <div>
        <h1>Recycle or Trash</h1>
        <p>On-device image check. No uploads. Works offline after first load.</p>
      </div>
      <button id="themeToggle" class="theme-toggle" aria-label="Toggle dark/light mode">â˜€ï¸</button>
    </div>
    <div class="header-controls">
      <select id="regionSelect" class="region-select" aria-label="Select your region">
        <option value="default">General (Worldwide)</option>
        <option value="US-CA">California, USA</option>
        <option value="US-NY">New York, USA</option>
        <option value="US-TX">Texas, USA</option>
        <option value="EU">European Union</option>
      </select>
      <button id="findRecycling" class="btn btn-secondary" aria-label="Find nearby recycling centers">ğŸ“ Find Recycling Centers</button>
    </div>
    <div id="stats" class="stats" role="status" aria-live="polite">ğŸ“Š 0 items checked | â™»ï¸ 0 recycled (0%) | ğŸ—‘ï¸ 0 trash</div>
  </header>

  <main>
    <section class="input">
      <div class="buttons">
        <label class="btn">
          <input id="fileInput" type="file" accept="image/*" capture="environment" hidden />
          <span>Take/Choose Photo</span>
        </label>
        <button id="cameraBtn" class="btn" type="button">Live Camera</button>
        <button id="stopCameraBtn" class="btn outline" type="button" hidden>Stop</button>
      </div>

      <div class="preview">
        <img id="previewImg" alt="Preview" />
        <video id="video" playsinline muted hidden></video>
        <canvas id="canvas" hidden></canvas>
      </div>
    </section>

    <section class="results" id="results" hidden>
      <div class="pill" id="decisionPill">â€“</div>
      <div class="topk" id="topk"></div>
      <p class="hint" id="hint"></p>
    </section>
  </main>

  <footer>
    <small>Model: MobileNetV2 (TensorFlow.js). Mapping heuristic for MVP. For better accuracy, fine-tuning on waste datasets is recommended.</small>
  </footer>

  <script src="./vendor/tf.min.js"></script>
  <script src="./vendor/mobilenet.min.js"></script>
  <script src="./script.js"></script>
</body>
</html>
